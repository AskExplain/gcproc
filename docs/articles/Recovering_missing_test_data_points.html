<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recovering missing test data points • gcproc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Recovering missing test data points">
<meta property="og:description" content="gcproc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gcproc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Aligning_scRNAseq_to_Spatial_Transcriptomics.html">Aligning single cell RNA to histology tissue images</a>
    </li>
    <li>
      <a href="../articles/Dimensionality_reduction_with_gcproc.html">Dimensionality reduction with gcproc</a>
    </li>
    <li>
      <a href="../articles/Neurips_OpenSingleCell_Prediction_task.html">Neurips Open Problems in Single Cell Analysis: Prediction task</a>
    </li>
    <li>
      <a href="../articles/Recovering_missing_test_data_points.html">Recovering missing test data points</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Recovering_missing_test_data_points_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Recovering missing test data points</h1>
            
            <h4 class="date">Compiled: October 07, 2021</h4>
      
      
      <div class="hidden name"><code>Recovering_missing_test_data_points.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level3">
<h3 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h3>
<p>Generalised Canonical Procrustes (gcproc) can recover missing values in a dataset via a prediction or imputation step, depending on the missingness of the data. Recovery begins by projecting the features of the data into a reduced dimensional subspace: encoding to improve information quality. When both the predictor (y) and feature (x) variables are transformed via the encoding projection learned in gcproc, a linear model is used to reweight the feature to find an estimate of the predictor. The key step in this process is learning a set of parameters via gcproc that encode the features to enrich the information quality before input into the linear model regression.</p>
</div>
<div id="step-0---prepare-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#step-0---prepare-libraries" class="anchor"></a>Step 0 - Prepare libraries</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gcproc</span>,quietly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://mclust-org.github.io/mclust/">mclust</a></span>,quietly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>## Package 'mclust' version 5.4.7
## Type 'citation("mclust")' for citing this R package in publications.</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">irlba</span>,quietly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
</div>
<div id="step-1---initialise-config" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1---initialise-config" class="anchor"></a>Step 1 - Initialise config</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config.recover</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_config.html">extract_config</a></span><span class="op">(</span><span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>## $i_dim
## [1] 30
## 
## $j_dim
## [1] 30
## 
## $min_iter
## [1] 1
## 
## $max_iter
## [1] 150
## 
## $tol
## [1] 1
## 
## $verbose
## [1] TRUE
## 
## $n_cores
## [1] 8
## 
## $init
## [1] "random"</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config.recover</span><span class="op">$</span><span class="va">i_dim</span> <span class="op">&lt;-</span> <span class="fl">100</span>
<span class="va">config.recover</span><span class="op">$</span><span class="va">j_dim</span> <span class="op">&lt;-</span> <span class="fl">30</span>
<span class="va">config.recover</span><span class="op">$</span><span class="va">init</span> <span class="op">&lt;-</span> <span class="st">"random"</span>
<span class="va">config.recover</span><span class="op">$</span><span class="va">verbose</span> <span class="op">&lt;-</span> <span class="cn">F</span>
<span class="va">config.recover</span><span class="op">$</span><span class="va">n_cores</span> <span class="op">&lt;-</span> <span class="fl">4</span></code></pre></div>
</div>
<div id="step-2---prepare-data" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2---prepare-data" class="anchor"></a>Step 2 - Prepare data</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">predict.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">predict.names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wine"</span>,<span class="st">"QuickStartExample"</span>,<span class="st">"golub"</span>,<span class="st">"oliveoil"</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pdfCluster</span><span class="op">)</span></code></pre></div>
<pre><code>## pdfCluster 1.0-3</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"wine"</span><span class="op">)</span>
<span class="va">predict.list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">wine</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu">glmnet</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Loaded glmnet 4.1-2</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"QuickStartExample"</span><span class="op">)</span>
<span class="va">predict.list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">QuickStartExample</span><span class="op">$</span><span class="va">y</span>,<span class="va">QuickStartExample</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">multtest</span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: BiocGenerics</code></pre>
<pre><code>## Loading required package: parallel</code></pre>
<pre><code>## 
## Attaching package: 'BiocGenerics'</code></pre>
<pre><code>## The following objects are masked from 'package:parallel':
## 
##     clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
##     clusterExport, clusterMap, parApply, parCapply, parLapply,
##     parLapplyLB, parRapply, parSapply, parSapplyLB</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     IQR, mad, sd, var, xtabs</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     anyDuplicated, append, as.data.frame, basename, cbind, colnames,
##     dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
##     grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
##     order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
##     rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
##     union, unique, unsplit, which.max, which.min</code></pre>
<pre><code>## Loading required package: Biobase</code></pre>
<pre><code>## Welcome to Bioconductor
## 
##     Vignettes contain introductory material; view with
##     'browseVignettes()'. To cite Bioconductor, see
##     'citation("Biobase")', and for packages 'citation("pkgname")'.</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"golub"</span><span class="op">)</span>
<span class="va">predict.list</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">golub</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">golub</span>,<span class="fl">2</span>,<span class="va">var</span><span class="op">)</span>,decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">]</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">pdfCluster</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"oliveoil"</span><span class="op">)</span>
<span class="va">predict.list</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">oliveoil</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
<div id="step-3---run-gcproc-glmnet-and-linear-model-on-test-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3---run-gcproc-glmnet-and-linear-model-on-test-datasets" class="anchor"></a>Step 3 - Run gcproc, glmnet and linear model on test datasets</h3>
<p>Three models are run: gcproc, glmnet and lm - respectively they are Generalised Canonical Procrustes, a Regularised Generalised Linear Model, and a Standard Linear Model. The root mean squared error is reported, along with the pearson correlation.</p>
<p>Four datasets are used in this regression to recover missing values. The most variable feature is listed as the variable to be predicted, while all other variables are listed as the covariates.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">list_id</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">predict.list</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># Take dataset</span>
  <span class="va">data___x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">predict.list</span><span class="op">[[</span><span class="va">list_id</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co"># Find most variable feature</span>
  <span class="va">y_predict.id_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">data___x</span>,<span class="fl">2</span>,<span class="va">var</span><span class="op">)</span><span class="op">)</span>,<span class="fl">1</span><span class="op">)</span>
  
  <span class="va">main_scores.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span>
  
  <span class="kw">for</span> <span class="op">(</span><span class="va">seed</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    
    <span class="co"># Set up training ids</span>
    <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>
    <span class="va">train_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="fl">0.9</span><span class="op">)</span>
    
    <span class="co"># Set up y column by looping through each column</span>
    
    <span class="co"># glmnet</span>
    <span class="va">glmnet_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="fu">glmnet</span><span class="fu">::</span><span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html">cv.glmnet</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">[</span><span class="va">train_id</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">y_predict.id_col</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">[</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span><span class="op">)</span>,type.measure <span class="op">=</span> <span class="st">"mse"</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">y_predict.id_col</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>, s <span class="op">=</span> <span class="st">"lambda.min"</span><span class="op">)</span>
    
    <span class="co"># lm</span>
    <span class="va">lm_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">[</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span><span class="op">)</span><span class="op">~</span><span class="va">.</span>,data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">data___x</span><span class="op">[</span><span class="va">train_id</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">y_predict.id_col</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">data___x</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">y_predict.id_col</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    
    
    <span class="co"># Set up gcproc</span>
    
    <span class="co"># Set up recovery for gcproc</span>
    <span class="va">recover</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_recovery_framework.html">extract_recovery_framework</a></span><span class="op">(</span><span class="cn">F</span><span class="op">)</span>
    <span class="va">recover</span><span class="op">$</span><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span>
    <span class="va">recover</span><span class="op">$</span><span class="va">method</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"knn"</span><span class="op">)</span>
    <span class="va">recover.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fl">0</span>,dim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">)</span>
    <span class="va">recover.x</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span>
    
    <span class="co"># Initialise missing values given by recovery design matrix with median feature value</span>
    <span class="va">x.x.check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span>
    <span class="va">x.x.check</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">lm_predict</span>
    
    <span class="va">main_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">x.x.check</span>,<span class="va">x.x.check</span><span class="op">)</span>
    
    <span class="va">recover</span><span class="op">$</span><span class="va">design.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">recover.x</span>,<span class="va">recover.x</span><span class="op">)</span>
    
    <span class="co"># Run gcproc</span>
    <span class="va">gcproc.model</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/gcproc.html">gcproc</a></span><span class="op">(</span><span class="va">main_data</span>,
                                   config <span class="op">=</span> <span class="va">config.recover</span>,
                                   recover <span class="op">=</span> <span class="va">recover</span>
                                   <span class="op">)</span>
    
    <span class="co"># Extract predicted values</span>
    <span class="va">gcproc.recover</span> <span class="op">&lt;-</span> <span class="va">gcproc.model</span><span class="op">$</span><span class="va">recover</span><span class="op">$</span><span class="va">predict.list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
    
    <span class="va">y_hat.plot</span> <span class="op">&lt;-</span> <span class="va">gcproc.recover</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span>
    <span class="va">data___x.plot</span> <span class="op">&lt;-</span> <span class="va">data___x</span><span class="op">[</span><span class="op">-</span><span class="va">train_id</span>,<span class="va">y_predict.id_col</span><span class="op">]</span>
    
    <span class="co"># Set up table for plotting</span>
    <span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">seed</span>,<span class="st">"Feature Column"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">[</span><span class="va">y_predict.id_col</span><span class="op">]</span>,Metric<span class="op">=</span><span class="st">"Loss: Root Mean Squared Error"</span>,
                                        <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gcproc"</span>,<span class="st">"glmnet"</span>,<span class="st">"linear model"</span><span class="op">)</span>,Value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">y_hat.plot</span><span class="op">-</span><span class="va">data___x.plot</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">glmnet_predict</span><span class="op">-</span><span class="va">data___x.plot</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">lm_predict</span><span class="op">-</span><span class="va">data___x.plot</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                             <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">seed</span>,<span class="st">"Feature Column"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">[</span><span class="va">y_predict.id_col</span><span class="op">]</span>,Metric<span class="op">=</span><span class="st">"Correlation: Pearson"</span>,                                <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gcproc"</span>,<span class="st">"glmnet"</span>,<span class="st">"linear model"</span><span class="op">)</span>,Value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">y_hat.plot</span>,<span class="va">data___x.plot</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">glmnet_predict</span>,<span class="va">data___x.plot</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">lm_predict</span>,<span class="va">data___x.plot</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
                             <span class="op">)</span>
    <span class="op">)</span><span class="op">)</span>
    
    <span class="va">main_scores.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">main_scores.1</span>,<span class="va">vals</span><span class="op">)</span>
    
    
  <span class="op">}</span>
  
  
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">(</span><span class="va">main_scores.1</span><span class="op">[</span><span class="va">main_scores.1</span><span class="op">$</span><span class="va">Metric</span><span class="op">==</span><span class="st">"Loss: Root Mean Squared Error"</span>,<span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Metric</span>, y<span class="op">=</span><span class="va">Value</span>, fill<span class="op">=</span><span class="va">Method</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">predict.names</span><span class="op">[</span><span class="va">list_id</span><span class="op">]</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>

  
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
  <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">(</span><span class="va">main_scores.1</span><span class="op">[</span><span class="va">main_scores.1</span><span class="op">$</span><span class="va">Metric</span><span class="op">==</span><span class="st">"Correlation: Pearson"</span>,<span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Metric</span>, y<span class="op">=</span><span class="va">Value</span>, fill<span class="op">=</span><span class="va">Method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">predict.names</span><span class="op">[</span><span class="va">list_id</span><span class="op">]</span><span class="op">)</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>

  
<span class="op">}</span></code></pre></div>
<p><img src="Recovering_missing_test_data_points_files/figure-html/step_3-1.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-2.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-3.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-4.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-5.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-6.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-7.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_3-8.png" width="700"></p>
</div>
<div id="step-4---run-gcproc-and-mice-on-various-datasets-with-missigness-via-ampute" class="section level3">
<h3 class="hasAnchor">
<a href="#step-4---run-gcproc-and-mice-on-various-datasets-with-missigness-via-ampute" class="anchor"></a>Step 4 - Run gcproc and mice on various datasets with missigness via ampute</h3>
<p>To induce missingness into the dataset, the default “missing at random” was induced via the ampute function via mice. This is in contrast to other types of missingness that can be [not at random], or [completely at random]. For gcproc, the missing data is initialized via the median value for the corresponding feature. The root mean squared error is reported, along with the pearson correlation.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">list_id</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">predict.list</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># Take dataset</span>
  <span class="va">data___x</span> <span class="op">&lt;-</span> <span class="va">predict.list</span><span class="op">[[</span><span class="va">list_id</span><span class="op">]</span><span class="op">]</span>

  <span class="va">main_scores.2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span>
  
  <span class="kw">for</span> <span class="op">(</span><span class="va">seed</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">{</span>
    
    <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>
    
    <span class="co"># Run mice</span>
    <span class="va">data___x.check</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    <span class="va">data___x.check</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://amices.org/mice/reference/ampute.html">ampute</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data___x.check</span>,mech <span class="op">=</span> <span class="st">"MAR"</span><span class="op">)</span>
    <span class="va">data___x.check</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://amices.org/mice/reference/mice.html">mice</a></span><span class="op">(</span><span class="va">data___x.check</span><span class="op">$</span><span class="va">amp</span>,printFlag <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
    <span class="va">mice.pred</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="fu">::</span><span class="fu"><a href="https://amices.org/mice/reference/complete.mids.html">complete</a></span><span class="op">(</span><span class="va">data___x.check</span><span class="op">)</span>
    
    <span class="co"># Set up recovery design matrix</span>
    <span class="va">recover</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_recovery_framework.html">extract_recovery_framework</a></span><span class="op">(</span><span class="cn">F</span><span class="op">)</span>
    <span class="va">recover.x</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">data___x.check</span><span class="op">$</span><span class="va">where</span><span class="op">)</span>

    <span class="co"># Initialise missing values given by recovery design matrix with median feature value</span>
    <span class="va">x.x.check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">data___x</span><span class="op">)</span>
    <span class="va">x.x.check</span> <span class="op">&lt;-</span> <span class="va">x.x.check</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">recover.x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="st">'cbind'</span>,<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x.x.check</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">recover.x</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,<span class="kw">function</span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">{</span><span class="op">(</span><span class="va">recover.x</span><span class="op">[</span>,<span class="va">X</span><span class="op">]</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x.x.check</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">recover.x</span><span class="op">)</span><span class="op">[</span>,<span class="va">X</span><span class="op">]</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span>,<span class="va">X</span><span class="op">]</span><span class="op">)</span><span class="op">}</span><span class="op">)</span><span class="op">)</span>
    
    
    <span class="va">main_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">x.x.check</span>,<span class="va">x.x.check</span><span class="op">)</span>
    
    <span class="va">recover</span><span class="op">$</span><span class="va">design.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">recover.x</span>,<span class="va">recover.x</span><span class="op">)</span>
    <span class="va">recover</span><span class="op">$</span><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span>
    <span class="va">recover</span><span class="op">$</span><span class="va">method</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"knn"</span><span class="op">)</span>
    
    <span class="va">join</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_join_framework.html">extract_join_framework</a></span><span class="op">(</span><span class="cn">F</span><span class="op">)</span>
    <span class="va">join</span><span class="op">$</span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>
    <span class="va">join</span><span class="op">$</span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>
    
    <span class="co"># Run gcproc</span>
    <span class="va">gcproc.model</span> <span class="op">&lt;-</span> <span class="fu">gcproc</span><span class="fu">::</span><span class="fu"><a href="../reference/gcproc.html">gcproc</a></span><span class="op">(</span><span class="va">main_data</span>,
                                   config <span class="op">=</span> <span class="va">config.recover</span>,
                                   recover <span class="op">=</span> <span class="va">recover</span>
    <span class="op">)</span>
    
    <span class="va">gcproc.recover</span> <span class="op">&lt;-</span> <span class="va">gcproc.model</span><span class="op">$</span><span class="va">recover</span><span class="op">$</span><span class="va">predict.list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
    
    <span class="co"># Extract imputed values</span>
    <span class="va">y_hat.plot</span> <span class="op">&lt;-</span> <span class="va">gcproc.recover</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">recover.x</span><span class="op">==</span><span class="fl">1</span>,arr.ind <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span>
    <span class="va">data___x.plot</span> <span class="op">&lt;-</span> <span class="va">data___x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">(</span><span class="va">recover.x</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span>,arr.ind <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span>
    <span class="va">mice.pred.plot</span> <span class="op">&lt;-</span> <span class="va">mice.pred</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">(</span><span class="va">recover.x</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span>,arr.ind <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">]</span>
    
    <span class="co"># Set up table for plotting</span>
    <span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">seed</span>,Metric<span class="op">=</span><span class="st">"Loss: Root Mean Squared Error"</span>,
                                        <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gcproc"</span>,<span class="st">"mice"</span><span class="op">)</span>,Value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
                                          <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">y_hat.plot</span><span class="op">-</span><span class="va">data___x.plot</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">mice.pred.plot</span><span class="op">-</span><span class="va">data___x.plot</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
                                        <span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                             <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">seed</span>,Metric<span class="op">=</span><span class="st">"Correlation: Pearson"</span>,                                <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gcproc"</span>,<span class="st">"mice"</span><span class="op">)</span>,Value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
                               <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">y_hat.plot</span>,<span class="va">data___x.plot</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">mice.pred.plot</span>,<span class="va">data___x.plot</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
                             <span class="op">)</span>
    <span class="op">)</span><span class="op">)</span>
    
    <span class="va">main_scores.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">main_scores.2</span>,<span class="va">vals</span><span class="op">)</span>
    
  <span class="op">}</span>
  
  
  
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">(</span><span class="va">main_scores.2</span><span class="op">[</span><span class="va">main_scores.2</span><span class="op">$</span><span class="va">Metric</span><span class="op">==</span><span class="st">"Loss: Root Mean Squared Error"</span>,<span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Metric</span>, y<span class="op">=</span><span class="va">Value</span>, fill<span class="op">=</span><span class="va">Method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">predict.names</span><span class="op">[</span><span class="va">list_id</span><span class="op">]</span><span class="op">)</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>
  
  
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
  <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">(</span><span class="va">main_scores.2</span><span class="op">[</span><span class="va">main_scores.2</span><span class="op">$</span><span class="va">Metric</span><span class="op">==</span><span class="st">"Correlation: Pearson"</span>,<span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Metric</span>, y<span class="op">=</span><span class="va">Value</span>, fill<span class="op">=</span><span class="va">Method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">predict.names</span><span class="op">[</span><span class="va">list_id</span><span class="op">]</span><span class="op">)</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>

<span class="op">}</span></code></pre></div>
<p><img src="Recovering_missing_test_data_points_files/figure-html/step_4-1.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-2.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-3.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-4.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-5.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-6.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-7.png" width="700"><img src="Recovering_missing_test_data_points_files/figure-html/step_4-8.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
